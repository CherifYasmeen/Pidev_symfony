{% extends 'client_back.html.twig' %}

{% block body %}

<div class="container">
    <table border=1 class="table table-striped">
        <tr>
            <th>Réf</th>
            <th>Depart</th>
            <th>Destination</th>
            <th>Poids</th>
            <th>Prix</th>
            <th>Action</th>
        </tr>
        <tr>
            <td>{{ coli.ref }}</td>
            <td>{{ coli.depart }}</td>
            <td>{{ coli.destination }}</td>
            <td>{{ coli.poids }} Kg</td>
            <td>{{ coli.prix }} dt</td>    
            <td>
                <a href="{{ path('app_edit', {'id' : coli.id}) }}"><i class="bi bi-gear"></i></a>
                <em>-</em>
                <a href="#" class="alert-link delete-link" data-id="{{ coli.id }}" onclick="confirmDelete(event)"><i class="bi bi-trash3 text-danger"></i></a>
                <em>-</em>
                <a href="{{ path('app_pdf', {'id' : coli.id}) }}" class="alert-link"><i class="bi bi-file-earmark-arrow-down-fill text-dark"></i></a>
            </td>   
        </tr>
    </table>
</div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    function confirmDelete(event) {
        event.preventDefault();
        
        const deleteLink = event.currentTarget;
        const id = deleteLink.dataset.id;
        
        if (confirm("Êtes-vous sûr de vouloir supprimer ce colis ?")) {
            axios.delete('/colis/delete/' + id)
                .then(function(response) {
                    window.location.href = response.data.redirectTo;
                })
                .catch(function(error) {
                    console.error(error);
                });
        }
    }
</script>
    
{% endblock %}
